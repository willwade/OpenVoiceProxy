import{s as k,j as p,k as i}from"./index-QCUBHikX.js";const w=k("keys",()=>{const n=p(),c=i([]),s=i(!1),a=i(null),u=i(null);async function o(){s.value=!0,a.value=null;try{const t=await fetch("/admin/api/keys",{headers:n.getHeaders()});if(t.ok){const e=await t.json();c.value=e.keys}else a.value="Failed to fetch keys"}catch{a.value="Connection error"}finally{s.value=!1}}async function y(t){s.value=!0,a.value=null,u.value=null;try{const e=await fetch("/admin/api/keys",{method:"POST",headers:n.getHeaders(!0),body:JSON.stringify(t)});if(e.ok){const l=(await e.json()).key;return u.value=l.key,await o(),l}else{const r=await e.json();return a.value=r.error||"Failed to create key",null}}catch{return a.value="Connection error",null}finally{s.value=!1}}async function f(t,e){try{return(await fetch(`/admin/api/keys/${t}`,{method:"PUT",headers:n.getHeaders(!0),body:JSON.stringify({active:e})})).ok?(await o(),!0):!1}catch{return!1}}async function d(t){try{return(await fetch(`/admin/api/keys/${t}`,{method:"DELETE",headers:n.getHeaders()})).ok?(await o(),!0):!1}catch{return!1}}async function h(t){try{const e=await fetch(`/admin/api/keys/${t}/engines`,{headers:n.getHeaders()});return e.ok?(await e.json()).engineConfig||{}:null}catch{return null}}async function g(t,e){try{return(await fetch(`/admin/api/keys/${t}/engines`,{method:"PUT",headers:n.getHeaders(!0),body:JSON.stringify({engineConfig:e})})).ok}catch{return!1}}return{keys:c,isLoading:s,error:a,lastCreatedKey:u,fetchKeys:o,createKey:y,toggleKeyStatus:f,deleteKey:d,getEngineConfig:h,updateEngineConfig:g}});export{w as u};
