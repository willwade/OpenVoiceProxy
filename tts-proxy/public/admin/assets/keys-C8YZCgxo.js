import{q as g,s as k,j as i}from"./index-DdglvfZT.js";const v=g("keys",()=>{const s=k(),c=i([]),r=i(!1),a=i(null),u=i(null);async function o(){r.value=!0,a.value=null;try{const t=await fetch("/admin/api/keys",{headers:s.getHeaders()});if(t.ok){const e=await t.json();c.value=e.keys}else a.value="Failed to fetch keys"}catch{a.value="Connection error"}finally{r.value=!1}}async function l(t){r.value=!0,a.value=null,u.value=null;try{const e=await fetch("/admin/api/keys",{method:"POST",headers:s.getHeaders(!0),body:JSON.stringify(t)});if(e.ok){const n=await e.json();return u.value=n.key,await o(),n}else{const n=await e.json();return a.value=n.error||"Failed to create key",null}}catch{return a.value="Connection error",null}finally{r.value=!1}}async function f(t,e){try{return(await fetch(`/admin/api/keys/${t}`,{method:"PUT",headers:s.getHeaders(!0),body:JSON.stringify({active:e})})).ok?(await o(),!0):!1}catch{return!1}}async function y(t){try{return(await fetch(`/admin/api/keys/${t}`,{method:"DELETE",headers:s.getHeaders()})).ok?(await o(),!0):!1}catch{return!1}}async function d(t){try{const e=await fetch(`/admin/api/keys/${t}/engines`,{headers:s.getHeaders()});return e.ok?(await e.json()).engineConfig||{}:null}catch{return null}}async function h(t,e){try{return(await fetch(`/admin/api/keys/${t}/engines`,{method:"PUT",headers:s.getHeaders(!0),body:JSON.stringify({engineConfig:e})})).ok}catch{return!1}}return{keys:c,isLoading:r,error:a,lastCreatedKey:u,fetchKeys:o,createKey:l,toggleKeyStatus:f,deleteKey:y,getEngineConfig:d,updateEngineConfig:h}});export{v as u};
